<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tìm Kiếm</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
        body {
            font-family: 'Times New Roman',Times, serif;
            font-size: 13px;
        }
        .container {
            max-width: none;
            width: 100%;
        }


        .table {
            width: 100%;              /* Hoặc dùng giá trị lớn hơn nếu trong container nhỏ */
            table-layout: fixed;      /* Bắt buộc để width cột được tôn trọng */
            border-collapse: collapse;
        }

        th, td {
            text-align: center;
            vertical-align: middle;
            font-size: 14px;
            padding: 6px 8px;
            border: 1px solid #ddd;
        }

        .table th {
            background-color: #ffe699;
            white-space: wrap;
        }

        .table td {
            background-color: #fdfdfd;
        }

        /* Cột cần wrap: GHI CHÚ và TRỞ NGẠI */
        .table th.col-ghi-chu,
        .table td.col-ghi-chu,
        .table th.col-tro-ngai,
        .table td.col-tro-ngai {
            width: 200px;
            white-space: normal;
            word-break: break-word;
        }

        /* Các cột mã/đối tượng như DB/HD cũ/mới: giữ nguyên width nhỏ */
        .table th.col-db-cu,
        .table td.col-db-cu,
        .table th.col-hd-cu,
        .table td.col-hd-cu,
        .table th.col-db-moi,
        .table td.col-db-moi,
        .table th.col-hd-moi,
        .table td.col-hd-moi {
            width: 100px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .pagination-container {
          margin-top: 20px;
        }

        .pagination-link {
          display: inline-block;
          padding: 8px 14px;
          margin: 0 4px;
          text-decoration: none;
          background-color: #f0f0f0;
          border: 1px solid #ccc;
          border-radius: 4px;
          color: #333;
          font-weight: bold;
          transition: background-color 0.3s ease;
        }

        .pagination-link:hover {
          background-color: #007bff;
          color: white;
          border-color: #007bff;
        }

        .pagination-current {
          display: inline-block;
          margin: 0 8px;
          font-weight: bold;
          color: #555;
        }

    </style>
</head>
<body>
  <div class="container-fluid mt-4">
    <div>
      <a href="{% url 'tat_ca_ho_so' %}" class="btn btn-secondary me-3">← Quay lại</a>
      <h3 class="text-center mb-4">KẾT QUẢ TÌM KIẾM</h3>
    </div>
      {% if search_field and search_value %}
        <p class="text-center text-muted">
            <em>Đang tìm theo trường "<strong>{{ search_field_label }}</strong>" với giá trị "<strong>{{ search_value }}</strong>" có tổng hồ sơ: "<strong>{{ total }}</strong>"</em>
        </p>
      {% endif %}
      <div style="overflow-x: auto;">
          <div class="pagination-container">
            {% if current_page > 1 %}
              <a href="?page=1&search_field={{ search_field }}&search_value={{ search_value }}" class="pagination-link">Trang đầu</a>
              <a href="?page={{ current_page|add:"-1" }}&search_field={{ search_field }}&search_value={{ search_value }}" class="pagination-link">Trang trước</a>
            {% endif %}

            <span class="pagination-current">Trang {{ current_page }} / {{ total_pages }}</span>

            {% if current_page < total_pages %}
              <a href="?page={{ current_page|add:"1" }}&search_field={{ search_field }}&search_value={{ search_value }}" class="pagination-link">Trang sau</a>
              <a href="?page={{ total_pages }}&search_field={{ search_field }}&search_value={{ search_value }}" class="pagination-link">Trang cuối</a>
            {% endif %}
          </div>
          <table class="table table-bordered table-hover table-sm align-middle">
              <thead class="table-warning">
                  <tr>
                      <th>STT</th>
                      <th>BẢNG KÊ ĐỢT GÁN</th>
                      <th>ĐỢT NHẬP</th>
                      <th>SỐ HỒ SƠ</th>
                      <th class="col-db-cu">DB CŨ</th>
                      <th class="col-hd-cu">HD CŨ</th>
                      <th class="col-db-moi">DB MỚI</th>
                      <th class="col-hd-moi">HD MỚI</th>
                      <th>ĐỢT</th>
                      <th>GB</th>
                      <th>BÙ ĐM</th>
                      <th>HIỆU LỰC</th>
                      <th>MÃ HỢP ĐỒNG</th>
                      <th>DS LƯU</th>
                      <th class="col-ghi-chu">GHI CHÚ</th>
                      <th class="col-tro-ngai">TRỞ NGẠI</th>
                      <th>QUẬN</th>
                  </tr>
              </thead>
              <tbody>
                  {% for index, ho_so in ho_sos %}
                  <tr>
                      <td>{{ index }}</td>
                      <td>{{ ho_so.bang_ke_dot_gan }}</td>
                      <td>{{ ho_so.dot_nhap }}</td>
                      <td>{{ ho_so.so_ho_so }}</td>
                      <td class="col-db-cu">{{ ho_so.db_cu|default_if_none:'-' }}</td>
                      <td class="col-hd-cu">{{ ho_so.hd_cu|default_if_none:'-' }}</td>
                      <td class="col-db-moi">{{ ho_so.db_moi|default_if_none:'-' }}</td>
                      <td class="col-hd-moi">{{ ho_so.hd_moi|default_if_none:'-' }}</td>
                      <td>{{ ho_so.dot|default_if_none:'' }}</td>
                      <td>{{ ho_so.gb }}</td>
                      <td>{{ ho_so.bu_dm }}</td>
                      <td>{{ ho_so.hieu_luc|default_if_none:'' }}</td>
                      <td>{{ ho_so.ma_hd|default_if_none:'-' }}</td>
                      <td>{{ ho_so.ds_luu|default_if_none:'' }}</td>
                      <td class="col-ghi-chu">{{ ho_so.ghi_chu|default_if_none:'' }}</td>
                      <td class="col-tro-ngai">{{ ho_so.tro_ngai|default_if_none:'' }}</td>
                      <td>{{ ho_so.quan }}</td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
      </div>
  </div>
</body>
</html>